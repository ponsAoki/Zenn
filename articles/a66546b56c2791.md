---
title: "React Routerã§æ¡ä»¶ã«å¿œã˜ã¦ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ"
emoji: "ğŸ“"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [React, React Router]
published: true
---

# æ¦‚è¦

React Router ã§å„ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®è¨­å®šã‚’æ›¸ãã¨ãã«ã€ã€Œèªè¨¼ã—ã¦ãªã‹ã£ãŸã‚‰/login ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã€ã¿ãŸã„ãªå‡¦ç†ã‚’æ›¸ããŸã‚ã®ãƒ¡ãƒ¢ã§ã™ã€‚

# èµ·ããŸå•é¡Œ

ã¨ã‚ã‚‹å­¦ç¿’ç”¨ã«å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ãŸéš›ã€ä»¥ä¸‹ã®ã‚ˆã†ãªæ›¸ãæ–¹ãŒã•ã‚Œã¦ã„ã¾ã—ãŸã€‚

```js: src/routes/Router.jsx
import { BrowserRouter, Routes, Route, Redirect } from "react-router-dom";

const Router = () => {
    //loggedInã«ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ± (ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã‚Œã°trueãã†ã§ãªã‘ã‚Œã°false) ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹
  const loggedIn = useSelector((state) => state.auth.isSignIn);

  return (
    <BrowserRouter>
      <Routes>
        <Route path="/signin" element={<SignIn />} />
        {loggedIn ? (
          <>
            <Route path="/" element={ <Home /> }/>
          </>
        ) : (
          <Route>
            <Redirect to="/signin" />
          </Route>
        )}
      </Routes>
    </BrowserRouter>
  );
}

export default Router;

```

ä¸Šè¨˜ã®ã¾ã¾ã ã¨ãŠãã‚‰ãã“ã‚“ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã™ã€‚

```
export 'Redirect' (imported as 'Redirect') was not found in 'react-router-dom'
```

ãã®ç†ç”±ã¯ã“ã¡ã‚‰ â†“
https://gist.github.com/mjackson/b5748add2795ce7448a366ae8f8ae3bb
React Router ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼–ä»¥é™ã§ã¯éæ¨å¥¨ã€‚ã¨ã„ã†ã‹ä»Šå›å®Ÿéš› import ã§ããªã‹ã£ãŸã€‚

ãªã®ã§ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã¦ã¿ã¾ã™ã€‚

```js: src/routes/Router.jsx
import {ãƒ»ãƒ»ãƒ»çœç•¥, Navigate} from "react-router-dom";
//ãƒ»ãƒ»ãƒ»çœç•¥
<Routes>
//ãƒ»ãƒ»ãƒ»çœç•¥
  <Route>
    <Navigate replace to="/signin" />
  </Route>
</Routes>
```

ã™ã‚‹ã¨ã€ä»Šåº¦ã¯ã“ã‚“ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã™ã€‚

```
Uncaught Error: [Navigate] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>
```

`<Routes>`ã® children ã¯`<Route>`ã‹`<React.Fragment>`ã—ã‹ãƒ€ãƒ¡ã¿ãŸã„ã§ã™ã€‚

# è§£æ±ºç­– (çµè«–)

ä»¥ä¸‹ã®ã‚ˆã†ã«ã€`<Route>`ã‚¿ã‚°ã®`element`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å€¤ã«ä¸‰é …æ¼”ç®—å­ã‚’ç”¨ã„ã¦åˆ†å²ã•ã›ã‚‹ã€‚

```js: src/routes/Router.jsx
import { BrowserRouter, Routes, Route, Navigate } from "react-router-dom";

const Router = () => {
    //loggedInã«ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ± (ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã‚Œã°trueãã†ã§ãªã‘ã‚Œã°false) ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹
  const loggedIn = useSelector((state) => state.auth.isSignIn);

  return (
    <BrowserRouter>
      <Routes>
        <Route path="/signin" element={<SignIn />} />
        <Route path="/" element={ loggedIn ? <Home /> : <Navigate replace to="/signin" />}/>
      </Routes>
    </BrowserRouter>
  );

export default Router;

```

ã§ã‚‚ã€ãƒ«ãƒ¼ãƒˆã®æ•°ãŒå¢—ãˆã‚‹ã¨ã“ã‚Œä¸€ã€…æ›¸ãã®é¢å€’ã ã‹ã‚‰ã€ä»–ã®æ›¸ãæ–¹ã®æ–¹ãŒã„ã„æ°—ã‚‚ã™ã‚‹ã€ã€ã€‚

ä»–ã«ã„ã„æ›¸ãæ–¹ã‚ã‚Œã°ãœã²æ•™ãˆã¦ãã ã•ã„ã€‚
